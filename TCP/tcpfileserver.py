import socket

HOST = "127.0.0.1"
PORT = 12345

with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
        s.bind((HOST, PORT))
        s.listen()

        while True:
                conn, addr = s.accept()

                print("Connetion received : " + str(addr))

                data = conn.recv(1024)
                if not data:
                        print("end of socket")
                        break
                else:
                        print("received data : " + str(data.decode()))
                        chemin_enregistrement = "output.txt"

                        f = open (chemin_enregistrement, "w")
                        f.write(data.decode())
                        f.close


                        rep = "OK".encode()
                        conn.sendall(rep)

